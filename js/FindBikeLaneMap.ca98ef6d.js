(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["FindBikeLaneMap"],{"0d24e":function(e,t,n){"use strict";var a=n("9ab4"),o=function(e){var t=e.OverlayView,n=(void 0===t&&window.google.maps.OverlayView,Object(a["d"])(e,["OverlayView"])),o=function(e){function t(){var t=e.call(this)||this;return t.latlng=n.latlng,t.html=n.html,t.setMap(n.map),t.position=n.position,t}return Object(a["b"])(t,e),t.prototype.createDiv=function(){var e=this;this.div=document.createElement("div"),this.div.style.position="absolute",this.html&&(this.div.innerHTML=this.html),window.google.maps.event.addDomListener(this.div,"click",(function(t){window.google.maps.event.trigger(e,"click")}))},t.prototype.appendDivToOverlay=function(){var e=this.getPanes();e.overlayImage.appendChild(this.div)},t.prototype.positionDiv=function(){var e=this.getProjection().fromLatLngToDivPixel(this.latlng),t=25;e&&(this.div.style.left=e.x-t+"px",this.div.style.top=e.y-t+"px")},t.prototype.draw=function(){this.div||(this.createDiv(),this.appendDivToOverlay()),this.positionDiv()},t.prototype.remove=function(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.getPosition=function(){return this.latlng},t.prototype.getDraggable=function(){return!1},t}(window.google.maps.OverlayView);return new o};t["a"]=o},"29d5":function(e,t,n){"use strict";var a=n("cd65"),o="Cycling";t["a"]={getCyclingShape:function(e){return a["a"].get(o+"/Shape/"+e)},getFilteredCyclingShape:function(e,t){return a["a"].get(o+"/Shape/"+e+"?$filter=RouteName eq '"+t+"'")}}},"3f11":function(e,t,n){"use strict";n.r(t);var a=n("7a23"),o={id:"map"};function i(e,t,n,i,r,c){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o)}var r=n("9ab4"),c=n("0d24e"),l=Object(a["defineComponent"])({name:"FindLaneMap",props:{bikeLaneGeomery:{type:Array,default:function(){return[]}},laneCenter:{type:Object,default:function(){return{lat:25.0325917,lng:121.5624999}}},starAndEnd:{type:Array,default:function(){return[]}},zoom:{type:Number,default:0}},setup:function(e){var t=this,n=Object(a["ref"])(null),o=Object(a["ref"])({lat:25.0325917,lng:121.5624999}),i=Object(a["ref"])([]),l=Object(a["ref"])([]),u=function(){n.value=new window.google.maps.Map(document.getElementById("map"),{center:o.value,zoom:e.zoom,maxZoom:20,minZoom:3,streetViewControl:!1,mapTypeControl:!1,disableDefaultUI:!0});var t={path:window.google.maps.SymbolPath.CIRCLE,strokeOpacity:1,fillOpacity:1,scale:3};new window.google.maps.Polyline({path:i.value,strokeOpacity:0,icons:[{icon:t,offset:"0",repeat:"20px"}],map:n.value})},s=function(){l.value&&e.starAndEnd.map((function(e,a){return Object(r["a"])(t,void 0,void 0,(function(){var t,o,i;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return e?(t=e.lat,o=e.lng,[4,new window.google.maps.LatLng({lat:t,lng:o})]):[2];case 1:return i=r.sent(),0!==a?[3,3]:[4,Object(c["a"])({latlng:i,map:n.value,html:'<div class="location">\n                <img class="locaion-img" src="img/return-location.png">\n                <div class="count return">始</div>\n                </div'})];case 2:return r.sent(),[3,5];case 3:return[4,Object(c["a"])({latlng:i,map:n.value,html:'<div class="location">\n                <img class="locaion-img" src="img/return-location.png">\n                <div class="count return">終</div>\n                </div'})];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}))};return Object(a["watch"])((function(){return e.laneCenter}),(function(e){return Object(r["a"])(t,void 0,void 0,(function(){return Object(r["c"])(this,(function(t){switch(t.label){case 0:return o.value=e,[4,u()];case 1:return t.sent(),[2]}}))}))})),Object(a["watch"])((function(){return e.bikeLaneGeomery}),(function(){s()})),Object(a["watch"])((function(){return e.bikeLaneGeomery}),(function(n){return Object(r["a"])(t,void 0,void 0,(function(){var t;return Object(r["c"])(this,(function(n){switch(n.label){case 0:return t=i,[4,e.bikeLaneGeomery];case 1:return t.value=n.sent(),u(),s(),[2]}}))}))})),Object(a["watch"])((function(){return e.zoom}),(function(){u(),s()})),Object(a["onMounted"])((function(){u()})),{setBikeLaneMakers:s,initMap:u}}}),u=(n("b39d"),n("6b0d")),s=n.n(u);const d=s()(l,[["render",i]]);var p=d,v=n("54bb"),b=(n("5959"),n("5618")),f=n.n(b),m={class:"back-button"},h=Object(a["createElementVNode"])("div",{class:"home-logo"},[Object(a["createElementVNode"])("img",{src:f.a,alt:""})],-1),g={class:"main-title"};function O(e,t,n,o,i,r){var c=Object(a["resolveComponent"])("ArrowLeftBold"),l=v["a"],u=Object(a["resolveComponent"])("router-link"),s=p,d=Object(a["resolveComponent"])("BaseLayout");return Object(a["openBlock"])(),Object(a["createBlock"])(d,{class:"find-bike-lane"},{header:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",m,[Object(a["createVNode"])(l,{onClick:e.goBack},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(c)]})),_:1},8,["onClick"])]),Object(a["createVNode"])(u,{to:"/"},{default:Object(a["withCtx"])((function(){return[h]})),_:1}),Object(a["createElementVNode"])("div",g,[Object(a["createElementVNode"])("p",null,Object(a["toDisplayString"])(e.$route.params.routeName),1)])]})),body:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(s,{bikeLaneGeomery:e.bikeLaneGeomery,laneCenter:e.laneCenter,starAndEnd:e.starAndEnd,zoom:e.laneDistance},null,8,["bikeLaneGeomery","laneCenter","starAndEnd","zoom"])]})),_:1})}var j=n("6fea"),y=n("2476"),w=n("29d5"),k=n("6c02"),C=Object(a["defineComponent"])({name:"FindBikeLaneMap",components:{BaseLayout:j["a"],ArrowLeftBold:y["a"],Map:p},setup:function(){var e=this,t=Object(k["d"])(),n=Object(k["c"])(),o=Object(a["ref"])([]),i=Object(a["ref"])(null),c=Object(a["ref"])([]),l=Object(a["ref"])(15),u=function(){t.back()},s=function(t,n){return Object(r["a"])(e,void 0,void 0,(function(){var e,a,l;return Object(r["c"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,w["a"].getFilteredCyclingShape(t,n)];case 1:return e=r.sent(),e?(a=o,[4,e.data[0].Geometry.split("((")[1].split("))")[0].split(",").map((function(e){return e.split(" ")})).map((function(e){return{lat:Number(e[1]),lng:Number(e[0])}}))]):[3,3];case 2:a.value=r.sent(),i.value=o.value[Math.ceil(o.value.length/2)],c.value.push(o.value[0]),c.value.push(o.value[o.value.length-1]),r.label=3;case 3:return[3,5];case 4:return l=r.sent(),console.log(l),[3,5];case 5:return[2]}}))}))};return Object(a["onMounted"])((function(){var e=n.params,t=e.city,a=e.routeName,o=e.distance,i=Number(o)/1e3;i>3&&(l.value=13),s(t,a)})),{bikeLaneGeomery:o,laneCenter:i,starAndEnd:c,laneDistance:l,goBack:u}}});n("766f");const L=s()(C,[["render",O]]);t["default"]=L},"73c9":function(e,t,n){},"766f":function(e,t,n){"use strict";n("73c9")},b39d:function(e,t,n){"use strict";n("f5b9")},f5b9:function(e,t,n){}}]);
//# sourceMappingURL=FindBikeLaneMap.ca98ef6d.js.map